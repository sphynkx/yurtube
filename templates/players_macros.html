<!-- 
## SRTG_DONE
## SRTG_2MODIFY: storage/
-->
{% macro render_player(
  player_name="standard",
  video_src="",
  poster_url=None,
  video_id=None,
  subtitles=[],
  options={},
  sprites_vtt_url=None,
  caption_vtt=None,
  caption_lang=None,
  caption_vtt_url=None,
  storage_public_base_url=None
) -%}
  {% set _video_src = video_src or "" %}
  {% set _poster = poster_url or "" %}
  {% set _vid = video_id or "" %}
  {% set _subs = subtitles or [] %}
  {% set _opts = options or {} %}
  {% set _sprites_vtt = sprites_vtt_url or "" %}
  {% set _cap_vtt_rel = caption_vtt or "" %}
  {% set _cap_vtt_url = caption_vtt_url or "" %}
  {% set _cap_lang = caption_lang or "" %}
  {% if not _cap_vtt_url and _cap_vtt_rel %}
    {% set _cap_vtt_url = (storage_public_base_url ~ '/' ~ _cap_vtt_rel) if storage_public_base_url else ('/storage/' ~ _cap_vtt_rel) %}
  {% endif %}

  <link rel="stylesheet" href="/static/players/{{ player_name }}/css/player.css">
  <div class="player-host"
       data-player="{{ player_name }}"
       data-video-src="{{ _video_src }}"
       data-poster-url="{{ _poster }}"
       data-video-id="{{ _vid }}"
       data-subtitles='{{ _subs|tojson }}'
       data-options='{{ _opts|tojson }}'
       {%- if _sprites_vtt %} data-sprites-vtt="{{ _sprites_vtt }}" {%- endif %}
       {%- if _cap_vtt_url %} data-caption-vtt="{{ _cap_vtt_url }}" {%- endif %}
       {%- if _cap_lang %} data-caption-lang="{{ _cap_lang }}" {%- endif %}>
  </div>
  <script type="module" src="/static/players/{{ player_name }}/js/player.js"></script>
{%- endmacro %}