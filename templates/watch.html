{% extends "base.html" %}
{% block content %}
<div class="player-wrapper">
  <video controls preload="metadata" style="width:100%;max-height:70vh">
    <source src="/storage/{{ video['storage_path'] }}/original.webm" type="video/webm">
    Your browser does not support the video tag.
  </video>
</div>

<h2 class="watch-title">{{ video['title'] }}</h2>

<div class="video-info">
  <div class="author">
    <img class="mini-avatar" src="{{ video['author_avatar_url_small'] }}" alt="avatar"
         onerror="this.onerror=null;this.src='/static/img/avatar_default.svg';">
    {% if video['username'] %}
      <a href="/@{{ video['username'] }}">@{{ video['username'] }}</a>
    {% else %}
      <a href="/c/{{ video['channel_id'] }}">{{ video['channel_id'] }}</a>
    {% endif %}
  </div>
  <div class="counters">{{ video['views_count'] }} views</div>
  <div class="created-at">{{ video['created_at']|dt }}</div>
</div>

<p>{{ video['description'] }}</p>

<details style="margin-top:16px;">
  <summary>Embed</summary>
  <div style="margin-top:8px;">
    <textarea id="embed-code" readonly style="width:100%;height:100px;">{{ embed_code }}</textarea>
    <div style="margin-top:8px;">
      <button id="copy-embed">Copy to clipboard</button>
    </div>
  </div>
</details>
{% endblock %}