<!DOCTYPE html>
<!-- Expects:
     player_name, video_src, poster_url, video_id, subtitles, player_options, sprites_vtt_url,
     caption_vtt, caption_lang
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>{% if video and video.title %}{{ video.title }}{% else %}Embed Video{% endif %}</title>
  <link rel="stylesheet" href="/static/players/{{ player_name }}/css/embed.css">
  <style>
    html, body { margin: 0; padding: 0; height: 100%; background: #000; overflow: hidden; }
    .fallback-wrap { height: 100%; width: 100%; display: grid; place-items: center; background: #000; }
    .fallback-wrap img { max-width: 100%; max-height: 100%; height: auto; width: auto; display: block; }
  </style>
</head>
<body class="is-embed">
  {% set _not_found = not_found|default(false) %}
  {% set _fallback_img = fallback_image_url|default("/static/img/fallback_video_notfound.gif") %}

  {% if _not_found %}
    <div class="fallback-wrap">
      <img src="{{ _fallback_img }}" alt="Video not found">
    </div>
  {% else %}
    <div class="embed-root">
      <div class="player-wrapper">
        <div class="player-host"
             data-player="{{ player_name }}"
             data-video-src="{{ video_src }}"
             {% if poster_url %} data-poster-url="{{ poster_url }}" {% endif %}
             data-video-id="{{ video_id }}"
             data-subtitles='{{ subtitles|tojson }}'
             data-options='{{ player_options|tojson }}'
             {% if sprites_vtt_url %} data-sprites-vtt="{{ sprites_vtt_url }}" {% endif %}
             {% if caption_vtt %} data-caption-vtt="/storage/{{ caption_vtt }}" {% endif %}
             {% if caption_lang %} data-caption-lang="{{ caption_lang }}" {% endif %}>
        </div>
      </div>
    </div>
    <script type="module" src="/static/players/{{ player_name }}/js/embed.js"></script>
  {% endif %}

  <noscript>
    <div class="nojs">JavaScript is required to play this video.</div>
  </noscript>
</body>
</html>