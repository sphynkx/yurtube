(()=>{function yt(t,e,s){return t<e?e:t>s?s:t}function gt(t,e){let s=0,f=!1,x=null,n=null;return function(...L){x=L,n=this;let S=Date.now();!s||S-s>=e?(s=S,t.apply(n,x)):f||(f=!0,setTimeout(()=>{f=!1,t.apply(n,x)},e-(S-s)))}}function at(t,e,s){let f=t.getAttribute(e);if(!f)return s;try{return JSON.parse(f)}catch(x){return s}}var bt="/static/img/fallback_video_notfound.gif";function xt(t,e,s){let f=!1,x=null;function n(S){if(!f){f=!0,s&&s("fallback: applying",S);try{e?e.setAttribute("src",bt):t.src=bt,t.load()}catch(U){}}}function L(){x&&(clearTimeout(x),x=null)}t.addEventListener("loadstart",function(){L(),x=setTimeout(function(){!f&&t.readyState<1&&n("watchdog-timeout")},4e3)}),["loadeddata","canplay","canplaythrough","play","playing"].forEach(function(S){t.addEventListener(S,L)}),t.addEventListener("error",function(){f||n("error-event")}),setTimeout(function(){let S=e?e.getAttribute("src")||"":t.currentSrc||t.src||"";!f&&!S&&n("empty-src")},0)}var vt="yrp:";function wt(){try{return localStorage.setItem("__t","1"),localStorage.removeItem("__t"),!0}catch(t){return!1}}function lt(t,e){if(!wt())return e;try{let s=localStorage.getItem(vt+t);return s?JSON.parse(s):e}catch(s){return e}}function ut(t,e){if(wt())try{localStorage.setItem(vt+t,JSON.stringify(e))}catch(s){}}var it=Object.create(null);function At(t){let e=String(t).match(/url\(["']?([^"')]+)["']?\)/i);return e&&e[1]?e[1]:null}async function kt(t){if(!t)return!1;if(it[t]!==void 0)return it[t];try{let e=await fetch(t,{method:"GET",credentials:"same-origin",cache:"no-store"});return it[t]=!!e.ok,it[t]}catch(e){return it[t]=!1,!1}}async function Q({root:t,button:e,varOn:s,varOff:f,isOn:x,fallbackEmoji:n}){if(e&&e.dataset&&e.dataset.forceEmoji==="1"){e.textContent=n,e.style.webkitMaskImage="",e.style.maskImage="",e.style.backgroundColor="transparent",e.style.color="var(--yrp-icon-color)",e.style.textIndent="0",e.dataset.maskApplied="0";return}let L=x?s:f,U=getComputedStyle(t).getPropertyValue(L)||t.style.getPropertyValue(L)||"",N=At(U);if(!N){e.textContent=n,e.style.webkitMaskImage="",e.style.maskImage="",e.style.backgroundColor="transparent",e.style.color="var(--yrp-icon-color)",e.style.textIndent="0",e.dataset.maskApplied="0";return}if(await kt(N)){e.textContent="";let D=`var(${L})`;e.style.webkitMaskImage=D,e.style.maskImage=D,e.style.backgroundColor="var(--yrp-icon-color)",e.style.color="",e.style.textIndent="-9999px",e.dataset.maskApplied="1"}else e.textContent=n,e.style.webkitMaskImage="",e.style.maskImage="",e.style.backgroundColor="transparent",e.style.color="var(--yrp-icon-color)",e.style.textIndent="0",e.dataset.maskApplied="0"}async function St({root:t,video:e,DEBUG:s}){var P;let f=(...a)=>{if(s)try{}catch(l){}},x=new URL(window.location.href),n=x.searchParams.get("p"),L=x.searchParams.get("v")||t.getAttribute("data-video-id")||"";function S(){try{let a=e.textTracks||[];return Array.prototype.filter.call(a,l=>l&&(l.kind==="subtitles"||l.kind==="captions"))}catch(a){return[]}}function U(){return S().length>0}function N(){return S().some(l=>l.mode==="showing")}function V(a){let l=S();l.length&&(a?l.forEach((b,C)=>{b.mode=C===0?"showing":"hidden"}):l.forEach(b=>{b.mode="hidden"}))}n||["yrp-btn-prev","yrp-btn-next"].forEach(a=>{let l=t.querySelector("."+a);l&&(l.style.display="none")});function D(){let a=[],l=document.querySelector("#upnext-block .rb-list"),b=document.querySelector("#panel-upnext .upnext-list"),C=[];return l?C=l.querySelectorAll("a.rb-item[href*='/watch']"):b&&(C=b.querySelectorAll("a.rb-item[href*='/watch']")),C.forEach(Z=>{let W=(Z.getAttribute("href")||"").match(/[?&]v=([^&]+)/);W&&W[1]&&a.push(decodeURIComponent(W[1]))}),a}let m=n?D():[],M=n?m.indexOf(L):-1;n&&M<0&&(M=0);let B=a=>`pl:${n}:${a}`,T=n?lt(B("order"),"direct")==="shuffle"?"shuffle":"direct":"direct",O=n?(()=>{let a=lt(B("cycle"),"0");return a===!0||a==="1"})():!1;function k(a){if(m.length<=1)return a;let l=0,b=a;for(;l<6&&b===a;)b=Math.floor(Math.random()*m.length),l++;return b===a&&(b=(a+1)%m.length),b}function d(){if(!n)return-1;if(T==="shuffle")return k(M);let a=M+1;return a>=m.length?O?0:-1:a}function h(){if(!n)return-1;if(T==="shuffle")return k(M);let a=M-1;return a<0?O?m.length-1:-1:a}function g(a){if(!n)return;a=Math.max(0,Math.min(m.length-1,a));let l=m[a];if(!l)return;try{let C=lt("resume",{});C&&C[l]&&(delete C[l],ut("resume",C))}catch(C){}let b=new URL(window.location.href);b.searchParams.set("v",l),b.searchParams.set("p",n),window.location.href=b.toString()}let p=document.createElement("div");p.className="yrp-ext-controls",Object.assign(p.style,{position:"absolute",left:"12px",top:"12px",display:"flex",gap:"6px",alignItems:"center",zIndex:"20",background:"transparent",border:"none",padding:"0",opacity:"0",transition:"opacity 150ms ease",pointerEvents:"auto"});function v(a){let l=document.createElement("button");return l.type="button",l.title=a||"",l.setAttribute("aria-label",a||""),Object.assign(l.style,{border:"none",background:"transparent",width:"28px",height:"28px",cursor:"pointer",borderRadius:"14px",backgroundColor:"var(--yrp-icon-color)",color:"var(--yrp-icon-color)",textIndent:"-9999px",outline:"none"}),l.addEventListener("focus",()=>{l.style.outline="2px solid rgba(255,255,255,.6)",l.style.outlineOffset="2px"}),l.addEventListener("blur",()=>{l.style.outline="none"}),l.dataset.forceEmoji="0",l}let $=v("Previous"),E=v("Next"),R=v("Shuffle"),_=v("Cycle playlist"),w=v("Subtitles");try{let a=`/static/players/${((P=t.closest(".player-host"))==null?void 0:P.getAttribute("data-player"))||"standard"}/img/buttons`;[["--icon-prev","prev.svg"],["--icon-next","next.svg"],["--icon-shuffle-on","shuffle-on.svg"],["--icon-shuffle-off","shuffle-off.svg"],["--icon-cycle-on","cycle-on.svg"],["--icon-cycle-off","cycle-off.svg"],["--icon-cc","cc.svg"]].forEach(([l,b])=>{t.style.setProperty(l,`url("${a}/${b}")`)}),t.style.setProperty("--yrp-icon-color","#fff")}catch(a){}p.appendChild(w);let J=t.querySelector(".yrp-btn-prev"),Y=t.querySelector(".yrp-btn-next");n&&(J||p.appendChild($),Y||p.appendChild(E),p.appendChild(R),p.appendChild(_));async function ot(){n&&(R.setAttribute("aria-pressed",T==="shuffle"?"true":"false"),await Q({root:t,button:R,varOn:"--icon-shuffle-on",varOff:"--icon-shuffle-off",isOn:T==="shuffle",fallbackEmoji:"\u{1F500}"}),R.style.opacity=T==="shuffle"?"1":"0.7")}async function st(){n&&(_.setAttribute("aria-pressed",O?"true":"false"),await Q({root:t,button:_,varOn:"--icon-cycle-on",varOff:"--icon-cycle-off",isOn:!!O,fallbackEmoji:"\u{1F501}"}),_.style.opacity=O?"1":"0.7")}async function r(){n&&(await Q({root:t,button:$,varOn:"--icon-prev",varOff:"--icon-prev",isOn:!0,fallbackEmoji:"\u23EE"}),await Q({root:t,button:E,varOn:"--icon-next",varOff:"--icon-next",isOn:!0,fallbackEmoji:"\u23ED"}))}async function i(){let a=U();w.disabled=!a,w.style.opacity=a?"1":"0.4",await Q({root:t,button:w,varOn:"--icon-cc",varOff:"--icon-cc",isOn:!0,fallbackEmoji:"CC"}),a||(w.textContent="CC",w.style.textIndent="0",w.style.backgroundColor="transparent")}$.addEventListener("click",function(){let a=h();a>=0&&g(a)}),E.addEventListener("click",function(){let a=d();a>=0&&g(a)}),R.addEventListener("click",function(){T=T==="shuffle"?"direct":"shuffle",n&&ut(B("order"),T),ot(),u()}),_.addEventListener("click",function(){O=!O,n&&ut(B("cycle"),O?"1":"0"),st(),u()}),w.addEventListener("click",function(){if(!U())return;let a=!N();V(a),u()});try{let a=t.querySelector(".yrp-video-wrap")||t;getComputedStyle(a).position==="static"&&(a.style.position="relative"),a.appendChild(p)}catch(a){t.appendChild(p)}await r(),await ot(),await st(),await i();let o=null;function c(){p.style.opacity="1",o&&clearTimeout(o),o=setTimeout(()=>{p.style.opacity="0"},1600)}function u(){p.style.opacity="1",o&&clearTimeout(o),o=setTimeout(()=>{p.style.opacity="0"},1800)}["mouseenter","mousemove","pointermove","touchstart"].forEach(a=>{(t||document).addEventListener(a,()=>c(),{passive:!0})}),e.addEventListener("mouseleave",function(){o&&(clearTimeout(o),o=null),p.style.opacity="0"}),n&&(e.addEventListener("ended",function(){let a=d();a>=0&&g(a)}),document.addEventListener("keydown",function(a){let l=a.target&&a.target.tagName?a.target.tagName.toUpperCase():"";if(a.ctrlKey||a.metaKey||a.altKey||l==="INPUT"||l==="TEXTAREA"||a.target.isContentEditable)return;let b=a.code||"";if(b==="PageUp"){a.preventDefault();let C=h();C>=0&&g(C)}else if(b==="PageDown"){a.preventDefault();let C=d();C>=0&&g(C)}}))}var Mt={};function Lt(){try{let e=new URL(Mt.url).pathname.match(/\/static\/players\/([^\/]+)\//);if(e&&e[1])return e[1]}catch(t){}try{let e=(document.currentScript&&document.currentScript.src||"").match(/\/static\/players\/([^\/]+)\//);if(e&&e[1])return e[1]}catch(t){}try{let t=document.querySelector(".player-host[data-player]");if(t){let e=String(t.getAttribute("data-player")||"").trim();if(e)return e}}catch(t){}return"standard"}function Et(t,e){let s=null;try{s=t.play()}catch(f){e&&e("play threw",f),s=null}s&&typeof s.then=="function"?s.then(function(){e&&e("play resolved")}).catch(function(f){if(e&&e("play rejected",{name:f&&f.name,msg:f&&f.message}),!t.muted){t.muted=!0,t.setAttribute("muted","");try{t.play()}catch(x){}}}):setTimeout(function(){if(t.paused){t.muted=!0,t.setAttribute("muted","");try{t.play()}catch(f){}}},0)}function Tt({root:t,host:e,video:s,DEBUG:f}){let x=(...d)=>{if(f)try{}catch(h){}},n=at(e,"data-sources",[]),L=String(e.getAttribute("data-permit-download")||"").trim()==="1",S=at(e,"data-download-items",[]),U=t.querySelector(".yrp-video-wrap"),N=t.querySelector('.std-ext-media[data-std-media="1"]');if(!U||!N)return;let V=Array.isArray(n)&&n.filter(d=>d&&d.src).length>1,D=!!L&&Array.isArray(S)&&S.length>0;if(!V&&!D)return;try{getComputedStyle(U).position==="static"&&(U.style.position="relative")}catch(d){}N.innerHTML="",Object.assign(N.style,{position:"absolute",right:"12px",top:"12px",display:"flex",flexDirection:"column",gap:"6px",zIndex:"30",pointerEvents:"auto",alignItems:"flex-end"});function m(d){let h=document.createElement("div");Object.assign(h.style,{display:"flex",gap:"6px",alignItems:"center",background:"rgba(0,0,0,0.45)",border:"1px solid rgba(255,255,255,0.12)",padding:"6px 8px",borderRadius:"8px",color:"#fff",fontSize:"12px",lineHeight:"1",backdropFilter:"blur(2px)"});let g=document.createElement("div");return g.textContent=d,g.style.opacity="0.9",g.style.whiteSpace="nowrap",h.appendChild(g),{row:h}}function M(){let d=document.createElement("select");return Object.assign(d.style,{fontSize:"12px",padding:"3px 6px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.22)",background:"rgba(0,0,0,0.55)",color:"#fff",outline:"none"}),d}function B(){try{let d=s.querySelector("source");return d&&(d.getAttribute("src")||d.src)?String(d.getAttribute("src")||d.src||""):""}catch(d){return""}}let T=t.getAttribute("data-video-id")||"",O=T?"yrp:quality:"+T:"yrp:quality";function k(d){if(!d)return;let h=s.querySelector("source");if(!h)return;let g=B();if(g&&g===d)return;let p=!s.paused,v=Math.max(0,s.currentTime||0),$=isFinite(s.playbackRate)&&s.playbackRate>0?s.playbackRate:1,E=isFinite(s.volume)?s.volume:1,R=!!s.muted;try{localStorage.setItem(O,String(d))}catch(w){}try{h.setAttribute("src",String(d));try{h.src=String(d)}catch(w){}s.load()}catch(w){x("switchSource load error",w);return}let _=function(){s.removeEventListener("loadedmetadata",_);try{s.playbackRate=$}catch(w){}try{s.volume=E}catch(w){}try{s.muted=R}catch(w){}try{let w=isFinite(s.duration)?s.duration:0;if(w>0){let J=Math.min(v,Math.max(0,w-.25));s.currentTime=J}}catch(w){}if(p)try{s.play().catch(function(){})}catch(w){}};s.addEventListener("loadedmetadata",_)}if(V){let{row:d}=m("Quality"),h=M(),g=n.filter(E=>E&&E.src).map(E=>({label:String(E.label||E.preset||"Quality"),src:String(E.src||"")}));g.forEach(E=>{let R=document.createElement("option");R.value=E.src,R.textContent=E.label,h.appendChild(R)});let p=function(){try{return String(localStorage.getItem(O)||"")}catch(E){return""}}(),v=B(),$=p||v||g[0]&&g[0].src||"";$&&(h.value=$,p&&p!==v&&setTimeout(()=>k(p),0)),h.addEventListener("change",function(){let E=String(h.value||"");E&&k(E)}),d.appendChild(h),N.appendChild(d)}if(D){let{row:d}=m("Download"),h=M(),g=document.createElement("option");g.value="",g.textContent="Select\u2026",h.appendChild(g),S.forEach(p=>{if(!p||!p.url)return;let v=document.createElement("option");v.value=String(p.url||""),v.textContent=String(p.label||"Download"),p.filename&&v.setAttribute("data-filename",String(p.filename)),h.appendChild(v)}),h.addEventListener("change",function(){let p=String(h.value||"");if(p){try{window.open(p,"_blank","noopener")}catch(v){window.location.href=p}h.value=""}}),d.appendChild(h),N.appendChild(d)}}function mt(){let t=Lt(),e="/static/players/"+t,s=document.querySelectorAll('.player-host[data-player="'+t+'"]');s.length!==0&&fetch(e+"/templates/player.html",{credentials:"same-origin"}).then(f=>f.text()).then(function(f){for(let x=0;x<s.length;x++)It(s[x],f,e)}).catch(function(){})}function It(t,e,s){t.innerHTML=e;let f=t.querySelector(".yrp-container"),x=f.querySelector(".yrp-video-wrap"),n=f.querySelector(".yrp-video"),L=n.querySelector("source"),S=f.querySelector(".yrp-center-play"),U=f.querySelector(".yrp-center-logo"),N=t.getAttribute("data-video-src")||"",V=t.getAttribute("data-poster-url")||"",D=at(t,"data-subtitles",[]),m=at(t,"data-options",{}),M=t.getAttribute("data-sprites-vtt")||"",B=t.getAttribute("data-caption-vtt")||"",T=t.getAttribute("data-caption-lang")||"",O=/\byrpdebug=1\b/i.test(location.search)||!!(m&&m.debug);function k(){if(O)try{}catch(r){}}let d=null;function h(){if(d)return d;try{typeof Intl!="undefined"&&Intl.DisplayNames&&(d=new Intl.DisplayNames(["en"],{type:"language"}))}catch(r){}return d}function g(r,i){let o=String(r||"").trim();if(!o)return String(i||"");if(o.toLowerCase()==="auto")return"Auto";let c=o.split("-",1)[0].toLowerCase();try{let u=h();if(u&&typeof u.of=="function"){let P=u.of(c);if(P)return P.charAt(0).toUpperCase()+P.slice(1)}}catch(u){}return String(i||o)}if(U&&U.setAttribute("src",s+"/img/logo.png"),L&&L.setAttribute("src",N),V&&n.setAttribute("poster",V),m&&m.muted&&n.setAttribute("muted",""),m&&m.loop&&n.setAttribute("loop",""),n.setAttribute("playsinline",""),n.setAttribute("controls",""),Array.isArray(D)&&D.forEach(function(r){if(!r||!r.src)return;let i=document.createElement("track");i.setAttribute("kind","subtitles"),r.srclang&&i.setAttribute("srclang",String(r.srclang));let o=String(r.srclang||"").toLowerCase(),c=String(r.label||o||"Subtitles");i.setAttribute("label",g(o,c)+(o?` (${o})`:"")),i.setAttribute("src",String(r.src)),r.default&&i.setAttribute("default",""),n.appendChild(i)}),B)try{let r=document.createElement("track");r.setAttribute("kind","subtitles"),r.setAttribute("src",B),r.setAttribute("srclang",T||"auto");let i=String(T||"auto").toLowerCase(),o=String(T||"Original");r.setAttribute("label",g(i,o)+(i?` (${i})`:"")),r.setAttribute("default",""),n.appendChild(r)}catch(r){k("caption track append failed",r)}let p=function(){try{return String(localStorage.getItem("subtitle_lang")||"")}catch(r){return""}}();function v(){try{return n.textTracks?Array.prototype.filter.call(n.textTracks,function(r){return r.kind==="subtitles"||r.kind==="captions"}):[]}catch(r){return[]}}function $(){return v().map(function(i,o){let c=String(i.language||i.srclang||"").toLowerCase(),u=String(i.label||c||"Lang "+(o+1));return{index:o,lang:c,label:u,track:i}})}function E(r){let i=String(r||"").toLowerCase(),o=$();for(let c=0;c<o.length;c++)if(o[c].lang===i||o[c].label.toLowerCase()===i)return o[c].index;return-1}function R(r){let i=v();if(!i.length)return;let o=Math.max(0,Math.min(r,i.length-1));for(let c=0;c<i.length;c++)i[c].mode=c===o?"showing":"disabled"}function _(){try{let r=v();for(let i=0;i<r.length;i++){let o=r[i];if(o.mode==="showing"){let c=String(o.language||o.srclang||"").toLowerCase();if(c)try{localStorage.setItem("subtitle_lang",c)}catch(u){}return}}}catch(r){}}function w(){try{let r=v();if(!r||r.length===0)return;if(p){let c=E(p);if(c>=0){R(c);return}}let i=!!(m&&m.subtitles===!0),o=!1;for(let c=0;c<r.length;c++){let u=r[c],P=i||String(u.language||u.srclang||"")===(T||u.srclang);!o&&P?(u.mode="showing",o=!0):u.mode="disabled"}if(!o)for(let c=0;c<r.length;c++){r[c].mode="showing";break}}catch(r){}}try{n.load(),k("video.load() called",{src:N})}catch(r){k("video.load() error",r)}xt(n,L,k);function J(){n.paused?f.classList.remove("playing"):f.classList.add("playing")}["loadedmetadata","loadeddata","canplay","canplaythrough","play","playing","pause","stalled","suspend","waiting","error","abort","emptied"].forEach(function(r){n.addEventListener(r,function(){k("event",r,{rs:n.readyState,paused:n.paused,muted:n.muted})})}),n.addEventListener("play",J),n.addEventListener("pause",J),n.addEventListener("loadedmetadata",function(){w();try{let r=v();for(let i=0;i<r.length;i++){let o=r[i];o.addEventListener&&o.addEventListener("cuechange",_)}}catch(r){}n.addEventListener("timeupdate",gt(_,800),{passive:!0})});let Y=!1;function ot(){Y||(Y=!0,setTimeout(function(){Y=!1},180),n.paused?Et(n,k):n.pause())}S&&S.addEventListener("click",function(){ot()});function st(r){let i=r.target,o=i&&i.tagName?i.tagName.toUpperCase():"";if(i&&(i.isContentEditable||o==="INPUT"||o==="TEXTAREA")||r.ctrlKey||r.metaKey||r.altKey)return;let c=(r.key||"").toLowerCase(),u=r.code||"";if(c==="j"||u==="ArrowLeft")r.preventDefault(),n.currentTime=Math.max(0,(n.currentTime||0)-5);else if(c==="l"||u==="ArrowRight"){r.preventDefault();let P=isFinite(n.duration)?n.duration:1e9;n.currentTime=Math.min((n.currentTime||0)+5,P)}else c==="m"?(r.preventDefault(),n.muted=!n.muted):c==="f"&&(r.preventDefault(),document.fullscreenElement?document.exitFullscreen().catch(function(){}):f.requestFullscreen&&f.requestFullscreen().catch(function(){}))}document.addEventListener("keydown",st),function(){let r=!!(m&&m.autoplay===!0);if(k("autoplay check",{WANT:r,opt:m}),!r)return;function i(c){k("autoplay attempt",c),Et(n,k)}n.readyState>=1&&i("readyState>=1");let o=function(){n.removeEventListener("canplay",o),i("canplay")};n.addEventListener("canplay",o),setTimeout(function(){n.paused&&i("watchdog")},1200)}(),function(){let r=0;if(m&&typeof m.start=="number"&&m.start>0&&(r=Math.max(0,m.start)),!r)return;let i=function(){try{n.currentTime=Math.min(r,Math.floor(n.duration||r))}catch(o){}};isFinite(n.duration)&&n.duration>0?i():n.addEventListener("loadedmetadata",function o(){n.removeEventListener("loadedmetadata",o),i()})}(),function(){let i=[],o=!1,c=!1,u=null,P=0,a=160,l=90;function b(A){let y=String(A||"").match(/^(\d{2}):(\d{2}):(\d{2}\.\d{3})$/);if(!y)return 0;let I=parseInt(y[1],10),H=parseInt(y[2],10),X=parseFloat(y[3]);return I*3600+H*60+X}function C(A,y){if(!y)return"";if(/^https?:\/\//i.test(y)||y.startsWith("/"))return y;try{return new URL(A,window.location.origin).pathname.replace(/\/sprites\.vtt$/,"")+"/"+y.replace(/^\/+/,"")}catch(I){return y}}function Z(){return document.fullscreenElement||x||f}function ht(){if(u)return u;u=document.createElement("div"),u.className="std-sprite-pop",u.style.pointerEvents="none",u.style.display="none",u.style.border="1px solid #333",u.style.background="#000",u.style.overflow="hidden",u.style.boxShadow="0 4px 12px rgba(0,0,0,.4)",u.style.borderRadius="4px",u.style.zIndex="9999";let A=Z();if(document.fullscreenElement)u.style.position="fixed",A.appendChild(u);else{u.style.position="absolute";let y=A;getComputedStyle(y).position==="static"&&(y.style.position="relative"),y.appendChild(u)}return u}document.addEventListener("fullscreenchange",function(){if(!u)return;let A=Z();try{A.appendChild(u),u.style.position=document.fullscreenElement?"fixed":"absolute"}catch(y){}});function W(){!M||o||c||fetch(M,{credentials:"same-origin"}).then(A=>A.text()).then(function(A){let y=A.split(/\r?\n/);for(let I=0;I<y.length;I++){let H=y[I].trim();if(H&&H.indexOf("-->")>=0){let X=H.split("-->").map(K=>K.trim());if(X.length<2)continue;let tt=b(X[0]),G=b(X[1]),ct=(y[I+1]||"").trim(),et="",q=0,F=0,z=0,nt=0,j=ct.indexOf("#xywh=");if(j>0){et=ct.substring(0,j);let K=ct.substring(j+6).split(",");K.length===4&&(q=parseInt(K[0],10),F=parseInt(K[1],10),z=parseInt(K[2],10),nt=parseInt(K[3],10))}let rt=C(M,et);i.push({start:tt,end:G,spriteUrl:rt,x:q,y:F,w:z,h:nt}),G>P&&(P=G),I++}}o=!0,k("sprites VTT loaded (standard)",{cues:i.length,durationApprox:P})}).catch(function(A){c=!0,k("sprites VTT load failed (standard)",A)})}function Ct(A){if(!M||!i.length)return;let y=n.getBoundingClientRect(),I=Z().getBoundingClientRect(),H=Math.max(36,Math.min(140,Math.round(y.height*.12))),X=A.clientX,tt=Math.max(y.left,Math.min(X,y.right)),G=y.width>0?(tt-y.left)/y.width:0;G=Math.max(0,Math.min(1,G));let et=(isFinite(n.duration)&&n.duration>0?n.duration:P)*G,q=null;for(let dt=0;dt<i.length;dt++){let pt=i[dt];if(et>=pt.start&&et<pt.end){q=pt;break}}let F=ht();if(!q||!q.spriteUrl){F.style.display="none";return}let z=q.w>0?q.w:a,nt=q.h>0?q.h:l;for(;F.firstChild;)F.removeChild(F.firstChild);let j=document.createElement("img");j.src=q.spriteUrl,j.style.position="absolute",j.style.left=-q.x+"px",j.style.top=-q.y+"px",j.style.pointerEvents="none",F.appendChild(j),F.style.display="block",F.style.width=z+"px",F.style.height=nt+"px";let rt=!!document.fullscreenElement,K=rt?yt(tt-z/2,I.left,I.right-z):yt(tt-I.left-z/2,y.left-I.left,y.right-I.left-z),ft=y.bottom-(rt?0:I.top)-nt-H;rt||(ft=Math.max(0,ft)),F.style.left=K+"px",F.style.top=ft+"px"}M&&(n.addEventListener("loadedmetadata",function(){W()}),setTimeout(function(){!o&&!c&&W()},2500),n.addEventListener("mousemove",function(A){o&&Ct(A)}),n.addEventListener("mouseleave",function(){u&&(u.style.display="none")}))}(),St({root:f,video:n,DEBUG:O}),Tt({root:f,host:t,video:n,DEBUG:O}),J()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",mt):mt();})();
