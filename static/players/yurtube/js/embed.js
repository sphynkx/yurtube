(()=>{function st(e){(!isFinite(e)||e<0)&&(e=0),e=Math.floor(e);let r=Math.floor(e/3600),t=Math.floor(e%3600/60),a=e%60,s=o=>(o<10?"0":"")+o;return r>0?`${r}:${s(t)}:${s(a)}`:`${t}:${s(a)}`}function Kt(e,r){let t=0,a=!1,s=null;return function(...o){s=o;let d=Date.now();!t||d-t>=r?(t=d,e.apply(null,s)):a||(a=!0,setTimeout(()=>{a=!1,e.apply(null,s)},r-(d-t)))}}function ot(e,r,t){let a=e.getAttribute(r);if(!a)return t;try{return JSON.parse(a)}catch(s){return t}}function ct(e){if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(e).catch(function(){});else{let r=document.createElement("textarea");r.value=e,r.style.position="fixed",r.style.left="-9999px",document.body.appendChild(r),r.select();try{document.execCommand("copy")}catch(t){}document.body.removeChild(r)}}var Ut="/static/img/fallback_video_notfound.gif";function Xt(e,r,t){let a=!1,s=null;function o(f){if(!a){a=!0,t&&t("fallback: applying",f);try{r?r.setAttribute("src",Ut):e.src=Ut,e.load()}catch(N){}}}function d(){s&&(clearTimeout(s),s=null)}e.addEventListener("loadstart",function(){d(),s=setTimeout(function(){!a&&e.readyState<1&&o("watchdog-timeout")},4e3)}),["loadeddata","canplay","canplaythrough","play","playing"].forEach(function(f){e.addEventListener(f,d)}),e.addEventListener("error",function(){a||o("error-event")}),setTimeout(function(){let f=r?r.getAttribute("src")||"":e.currentSrc||e.src||"";!a&&!f&&o("empty-src")},0)}var lt=null;function he(){if(lt)return lt;try{typeof Intl!="undefined"&&Intl.DisplayNames&&(lt=new Intl.DisplayNames(["en"],{type:"language"}))}catch(e){}return lt}function ge(e,r){let t=String(e||"").trim();if(!t)return String(r||"");if(t.toLowerCase()==="auto")return"Auto";let a=t.split("-",1)[0].toLowerCase();try{let s=he();if(s&&typeof s.of=="function"){let o=s.of(a);if(o)return o.charAt(0).toUpperCase()+o.slice(1)}}catch(s){}return String(r||t)}function ut(e){try{return e.textTracks?Array.prototype.filter.call(e.textTracks,function(r){return r.kind==="subtitles"||r.kind==="captions"}):[]}catch(r){return[]}}function Z(e){return ut(e).length>0}function pt(e,r){let t=ut(e);if(t.length===0)return null;let a=r<0||r>=t.length?0:r;return t[a]}function Mt(e,r,t){ut(e).forEach(function(s,o){s.mode=o===r&&t?"hidden":"disabled"})}function be(e,r){if(!r||!r.cues||r.cues.length===0)return"";let t=e.currentTime||0;for(let a=0;a<r.cues.length;a++){let s=r.cues[a];if(t>=s.startTime&&t<=s.endTime)return(s.text||"").replace(/\r/g,"")}return""}function Yt(e){return ut(e).map(function(t,a){let s=String(t.language||t.srclang||"").toLowerCase(),o=String(t.label||s||"Lang "+(a+1)),d=ge(s,o);return{index:a,lang:s,label:d}})}function Tt(e,r){let t=String(r||"").toLowerCase(),a=Yt(e);for(let s=0;s<a.length;s++)if(a[s].lang===t||a[s].label.toLowerCase()===t)return a[s].index;return-1}function Wt(e,r,t,a){if(!e)return;for(;e.firstChild;)e.removeChild(e.firstChild);let s=document.createElement("button");s.type="button",s.className="yrp-menu-item",s.setAttribute("data-action","back"),s.textContent="\u2190 Back",t(s),e.appendChild(s);let o=document.createElement("button");o.type="button",o.className="yrp-menu-item",o.setAttribute("data-action","subs-on"),o.textContent="On"+(r?" \u2713":""),a(o),e.appendChild(o);let d=document.createElement("button");d.type="button",d.className="yrp-menu-item",d.setAttribute("data-action","subs-off"),d.textContent="Off"+(r?"":" \u2713"),a(d),e.appendChild(d)}function Jt(e,r,t,a,s,o){if(!e)return;for(;e.firstChild;)e.removeChild(e.firstChild);let d=document.createElement("button");d.type="button",d.className="yrp-menu-item",d.setAttribute("data-action","back"),d.textContent="\u2190 Back",a(d),e.appendChild(d);let f=o(d,e);e.appendChild(f);let N=Yt(r),w=pt(r,t),O=w&&(w.language||w.srclang)?String(w.language||w.srclang).toLowerCase():"",F=N.slice().sort(function(g,E){let V=(g.lang||"").toLowerCase(),k=(E.lang||"").toLowerCase();return V==="auto"&&k!=="auto"?-1:k==="auto"&&V!=="auto"?1:(g.label||"").localeCompare(E.label||"")});if(F.forEach(function(g){let E=document.createElement("button");E.type="button",E.className="yrp-menu-item",E.setAttribute("data-action","select-lang"),E.setAttribute("data-lang",g.lang||"");let V=g.lang?` (${g.lang})`:"",k=g.index===t||g.lang&&O&&g.lang===O;E.textContent=g.label+V+(k?" \u2713":""),s(E),f.appendChild(E)}),!F.length){let g=document.createElement("div");g.className="yrp-menu-title",g.style.marginTop="6px",g.style.fontSize="12px",g.style.opacity="0.8",g.textContent="No subtitles tracks",f.appendChild(g)}}function $t(e,r,t){if(!e)return;let a=Z(r);e.disabled=!a,e.style.visibility=a?"visible":"hidden",e.classList.toggle("no-tracks",!a),e.classList.toggle("has-tracks",a),e.classList.toggle("active",a&&t),e.classList.toggle("disabled-track",a&&!t),e.setAttribute("aria-pressed",t?"true":"false"),e.title=t?"Subtitles: on":"Subtitles: off",e.setAttribute("aria-label",t?"Subtitles enabled":"Subtitles disabled")}function zt(e,r,t,a){if(!e||!e.box)return;let s=pt(r,t);Mt(r,t,a),e.box.textContent=a?be(r,s):"",e.layer.style.display=a?"":"none"}function U(e){if(e)try{e.style.background="transparent",e.style.backgroundColor="transparent",e.style.border="none",e.style.boxShadow="none",e.style.color="inherit",e.style.textAlign="left",e.style.width="100%",e.style.display="block"}catch(r){}}function ft(e){U(e);try{e.style.background="rgba(255,255,255,0.12)",e.style.backgroundColor="rgba(255,255,255,0.12)",e.style.borderRadius="4px",e.style.fontWeight="700",e.style.marginBottom="6px",e.style.paddingLeft="8px",e.style.paddingRight="8px"}catch(r){}}function xe(e){try{e.classList.add("has-submenu")}catch(r){}}function Gt(e,r){let t=document.createElement("div");t.className="yrp-menu-scroll";let a=300;if(r)try{let o=r.closest(".yrp-container");if(o){let d=o.querySelector(".yrp-video-wrap");if(d){let f=d.getBoundingClientRect().height,N=Math.floor(f*2/3)-34-50-20;N>150&&(a=N)}}}catch(o){}Object.assign(t.style,{overflowY:"scroll",overflowX:"hidden",maxHeight:a+"px",minHeight:"100px",height:"auto",paddingRight:"8px",paddingLeft:"2px",marginTop:"4px",pointerEvents:"auto",position:"relative",display:"block",boxSizing:"border-box",WebkitOverflowScrolling:"touch"});let s=document.createElement("style");return s.textContent=`
    .yrp-menu-scroll {
      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,0.4) rgba(255,255,255,0.1);
    }
    .yrp-menu-scroll::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }
    .yrp-menu-scroll::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.1);
      border-radius: 5px;
      margin: 2px;
    }
    .yrp-menu-scroll::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.4);
      border-radius: 5px;
      border: 2px solid transparent;
      background-clip: padding-box;
    }
    .yrp-menu-scroll::-webkit-scrollbar-thumb:hover {
      background: rgba(255,255,255,0.6);
      background-clip: padding-box;
    }
    .yrp-menu-scroll::-webkit-scrollbar-thumb:active {
      background: rgba(255,255,255,0.8);
      background-clip: padding-box;
    }
  `,document.querySelector("#yrp-embed-menu-scroll-style")||(s.id="yrp-embed-menu-scroll-style",document.head.appendChild(s)),t.addEventListener("wheel",function(o){let d=t.scrollTop===0,f=t.scrollTop+t.clientHeight>=t.scrollHeight-1;(o.deltaY<0&&!d||o.deltaY>0&&!f||!d&&!f)&&o.stopPropagation()},{passive:!1}),t}function Se(e,r){if(e)try{let t=e.querySelector('.yrp-menu-section[data-section="quality"]');if(!t)return;let a=t.querySelector(".yrp-menu-title");if(a&&a.parentNode&&a.parentNode.removeChild(a),t.querySelector(".yrp-menu-item.quality-future"))return;let s=document.createElement("button");s.type="button",s.className="yrp-menu-item quality-future",s.textContent="Quality (future)",s.disabled=!0,r(s),s.style.opacity="0.75",t.appendChild(s)}catch(t){}}function we(e){if(e)try{let r=e.querySelector('.yrp-menu-section[data-section="subtitles"]');r&&r.parentNode&&r.parentNode.removeChild(r)}catch(r){}}function mt(e,r,t,a={}){if(!e)return null;let s=e.querySelector(".yrp-menu-section")||null,o=document.createElement("button");return o.type="button",o.className="yrp-menu-item",o.setAttribute("data-action",t),o.textContent=r,U(o),a.disabled===!0&&(o.disabled=!0,o.style.opacity="0.6"),a.hasSubmenu===!0&&xe(o),s&&s.parentNode===e?e.insertBefore(o,s):e.appendChild(o),o}function Le(){return[.5,.75,1,1.25,1.5,2]}function Qt(e,r,t,a){if(!e)return;for(;e.firstChild;)e.removeChild(e.firstChild);let s=document.createElement("button");s.type="button",s.className="yrp-menu-item",s.setAttribute("data-action","back"),s.textContent="\u2190 Back",t(s),e.appendChild(s);let o=isFinite(r.playbackRate)?r.playbackRate:1;Le().forEach(function(d){let f=document.createElement("button");f.type="button",f.className="yrp-menu-item",f.setAttribute("data-action","set-speed"),f.setAttribute("data-speed",String(d)),f.textContent=(d===1?"1.0x":String(d)+"x")+(Math.abs(d-o)<.001?" \u2713":""),a(f),e.appendChild(f)})}function At(e,r){let t=parseFloat(String(r));if(!(!isFinite(t)||t<=0)){e.playbackRate=t;try{localStorage.setItem("playback_speed",String(t))}catch(a){}}}var dt=class{constructor(r){this.menu=r,this.menuView="main",this.menuMainHTML="",this.menuFixedMinHeight=0}ensureMainSnapshot(){this.menu&&(this.menuMainHTML||(this.menuMainHTML=this.menu.innerHTML||""))}lockHeightFromCurrent(){if(this.menu&&!(this.menuFixedMinHeight>0))try{let r=this.menu.getBoundingClientRect();this.menuFixedMinHeight=Math.ceil(r.height||0),this.menuFixedMinHeight>0&&(this.menu.style.minHeight=this.menuFixedMinHeight+"px")}catch(r){}}resetHeightLock(){this.menu&&(this.menuFixedMinHeight=0,this.menu.style.minHeight="")}setView(r){this.menuView=r}getView(){return this.menuView}openMainView(r){if(this.menu){this.ensureMainSnapshot(),this.menu.innerHTML=this.menuMainHTML,this.menuView="main",this.menu.style.maxHeight="";try{let t=this.menu.querySelector('.yrp-menu-section[data-section="speed"]');t&&t.parentNode&&t.parentNode.removeChild(t)}catch(t){}we(this.menu),Se(this.menu,U),r&&(r.injectSpeed&&r.injectSpeed(),r.injectLanguages&&r.injectLanguages(),r.injectSubtitles&&r.injectSubtitles())}}constrainToPlayerHeight(r=2/3){if(this.menu)try{let t=this.menu.closest(".yrp-container");if(t){let a=t.querySelector(".yrp-video-wrap");if(a){let s=a.getBoundingClientRect().height,o=Math.floor(s*r)-34;o>100&&(this.menu.style.maxHeight=o+"px")}}}catch(t){}}};var ve={};function Ee(){try{let r=new URL(ve.url).pathname.match(/\/static\/players\/([^\/]+)\//);if(r)return r[1]}catch(e){}try{let r=(document.currentScript&&document.currentScript.src||"").match(/\/static\/players\/([^\/]+)\//);if(r)return r[1]}catch(e){}try{let e=document.querySelector(".player-host[data-player]");if(e){let r=String(e.getAttribute("data-player")||"").trim();if(r)return r}}catch(e){}return"yurtube"}function Pt(){let e=Ee(),r="/static/players/"+e,t=document.querySelectorAll('.player-host[data-player="'+e+'"]');t.length!==0&&fetch(r+"/templates/player.html",{credentials:"same-origin"}).then(a=>a.text()).then(function(a){for(let s=0;s<t.length;s++)ke(t[s],a,r)}).catch(function(){})}function ke(e,r,t){e.innerHTML=r;let a=e.querySelector(".yrp-container"),s=a.querySelector(".yrp-video-wrap"),o=a.querySelector(".yrp-video"),d=a.querySelector(".yrp-controls"),f=o.querySelector("source"),N=a.querySelector(".yrp-autoplay");N&&(N.style.display="none");let w=ot(e,"data-options",{}),O=/\byrpdebug=1\b/i.test(location.search)||!!(w&&w.debug);function F(){if(O)try{}catch(l){}}a.classList.add("yrp-embed"),a.setAttribute("tabindex","0");let g=e.getAttribute("data-video-src")||"",E=e.getAttribute("data-poster-url")||"",V=e.getAttribute("data-video-id")||"",k=ot(e,"data-subtitles",[]),I=e.getAttribute("data-sprites-vtt")||"",J=e.getAttribute("data-caption-vtt")||"",$=e.getAttribute("data-caption-lang")||"";f&&f.setAttribute("src",g),E&&o.setAttribute("poster",E),w&&w.autoplay&&o.setAttribute("autoplay",""),w&&w.muted&&o.setAttribute("muted",""),w&&w.loop&&o.setAttribute("loop",""),V&&a.setAttribute("data-video-id",V),I&&a.setAttribute("data-sprites-vtt",I),o.setAttribute("playsinline",""),Array.isArray(k)&&k.forEach(function(l){if(!l||!l.src)return;let q=document.createElement("track");q.setAttribute("kind","subtitles"),l.srclang&&q.setAttribute("srclang",String(l.srclang)),l.label&&q.setAttribute("label",String(l.label)),q.setAttribute("src",String(l.src)),l.default&&q.setAttribute("default",""),o.appendChild(q)});let tt=a.querySelector(".yrp-subtitles");if(J)try{let l=document.createElement("track");l.setAttribute("kind","subtitles"),l.setAttribute("src",J),l.setAttribute("srclang",$||"auto"),l.setAttribute("label",$||"Original"),l.setAttribute("default",""),o.appendChild(l)}catch(l){F("caption track append failed",l)}try{o.load(),F("video.load() called",{src:g})}catch(l){F("video.load() error",l)}Xt(o,f,F);let M=t+"/img/buttons";a.style.setProperty("--icon-play",'url("'+M+'/play.svg")'),a.style.setProperty("--icon-pause",'url("'+M+'/pause.svg")'),a.style.setProperty("--icon-prev",'url("'+M+'/prev.svg")'),a.style.setProperty("--icon-next",'url("'+M+'/next.svg")'),a.style.setProperty("--icon-vol",'url("'+M+'/volume.svg")'),a.style.setProperty("--icon-mute",'url("'+M+'/mute.svg")'),a.style.setProperty("--icon-cc",'url("'+M+'/cc.svg")'),a.style.setProperty("--icon-mini",'url("'+M+'/mini.svg")'),a.style.setProperty("--icon-settings",'url("'+M+'/settings.svg")'),a.style.setProperty("--icon-theater",'url("'+M+'/theater.svg")'),a.style.setProperty("--icon-full",'url("'+M+'/full.svg")'),a.classList.add("yrp-icons-ready");let C=a.querySelector(".yrp-center-logo");C&&C.setAttribute("src",t+"/img/logo.png"),Ce(a,s,o,d,I,O,tt)}function Ce(e,r,t,a,s,o,d){function f(){if(o)try{}catch(n){}}let N=e.querySelector(".yrp-center-play"),w=e.querySelector(".yrp-play"),O=e.querySelector(".yrp-vol-btn"),F=e.querySelector(".yrp-volume"),g=e.querySelector(".yrp-vol-slider"),E=e.querySelector(".yrp-time-current"),V=e.querySelector(".yrp-time-total"),k=e.querySelector(".yrp-progress"),I=e.querySelector(".yrp-progress-rail"),J=e.querySelector(".yrp-progress-buffer"),$=e.querySelector(".yrp-progress-played"),tt=e.querySelector(".yrp-progress-handle"),M=e.querySelector(".yrp-progress-tooltip"),C=e.querySelector(".yrp-settings"),l=e.querySelector(".yrp-menu"),q=e.querySelector(".yrp-fullscreen"),X=e.querySelector(".yrp-pip"),T=e.querySelector(".yrp-context"),yt=!1,j=0,ht=null,Y=!1,Zt=!1,h=new dt(l),B=!0,W=0,Ht=function(){try{return String(localStorage.getItem("subtitle_lang")||"")}catch(n){return""}}(),gt=function(){try{return parseFloat(localStorage.getItem("playback_speed")||"")}catch(n){return NaN}}();function te(n){let i=document.createElement("div");i.className="yrp-embed-captions-layer",Object.assign(i.style,{position:"absolute",left:"50%",top:"80%",transform:"translate(-50%,-50%)",zIndex:"21",pointerEvents:"auto",userSelect:"none",touchAction:"none"});let c=document.createElement("div");c.className="yrp-embed-captions-text",i.appendChild(c),getComputedStyle(n).position==="static"&&(n.style.position="relative"),n.appendChild(i);let u={active:!1,sx:0,sy:0},m=null;function x(){return n.getBoundingClientRect()}function S(b){if(u.active){if(u.active=!1,m&&(clearTimeout(m),m=null),b&&b.preventDefault)try{b.preventDefault()}catch(H){}if(b&&b.stopPropagation)try{b.stopPropagation()}catch(H){}}}function y(b){u.active=!0,u.sx=b.clientX,u.sy=b.clientY;try{i.setPointerCapture&&i.setPointerCapture(b.pointerId)}catch(H){}m&&(clearTimeout(m),m=null),b.preventDefault(),b.stopPropagation()}function L(b){if(!u.active)return;let H=b.clientX-u.sx,K=b.clientY-u.sy,D=x(),A=i.getBoundingClientRect(),Ct=A.left+A.width/2+H,vt=A.top+A.height/2+K,jt=A.width/2,_t=A.height/2;Ct=Math.min(Math.max(Ct,D.left+jt),D.right-jt),vt=Math.min(Math.max(vt,D.top+_t),D.bottom-_t);let me=(Ct-D.left)/D.width*100,ye=(vt-D.top)/D.height*100;i.style.left=me+"%",i.style.top=ye+"%",i.style.transform="translate(-50%,-50%)",u.sx=b.clientX,u.sy=b.clientY,b.preventDefault(),b.stopPropagation()}function v(){m&&clearTimeout(m),m=setTimeout(function(){S(new Event("leaveguard"))},200)}return i.addEventListener("pointerdown",y),document.addEventListener("pointermove",L),document.addEventListener("pointerup",S),document.addEventListener("pointercancel",S),document.addEventListener("mouseup",S),document.addEventListener("touchend",S),n.addEventListener("pointerleave",v),i.addEventListener("click",function(b){b.stopPropagation()}),{layer:i,box:c}}let ee=te(r);function ne(){return pt(t,W)}function bt(){Mt(t,W,B)}function _(){zt(ee,t,W,B)}function et(){$t(d,t,B)}function ie(n){let i=Tt(t,n);if(i>=0){W=i,B=!0;try{localStorage.setItem("subtitle_lang",String(n||""))}catch(c){}bt(),_(),et()}}function Nt(n){B=!!n,bt(),_(),et()}let z=[],nt=!1,it=!1,R=null,rt=0;function qt(n){let i=String(n||"").match(/^(\d{2}):(\d{2}):(\d{2}\.\d{3})$/);if(!i)return 0;let c=parseInt(i[1],10),p=parseInt(i[2],10),u=parseFloat(i[3]);return c*3600+p*60+u}function re(n){if(!n)return"";if(/^https?:\/\//i.test(n)||n.startsWith("/"))return n;try{return new URL(s,window.location.origin).pathname.replace(/\/sprites\.vtt$/,"")+"/"+n.replace(/^\/+/,"")}catch(i){return n}}function ae(){return R||(k?(R=document.createElement("div"),R.className="yrp-sprite-pop",Object.assign(R.style,{position:"absolute",bottom:"calc(100% + 30px)",left:"0",display:"none",width:"160px",height:"90px",border:"1px solid #333",background:"#000",overflow:"hidden",zIndex:"5"}),getComputedStyle(k).position==="static"&&(k.style.position="relative"),k.appendChild(R),R):null)}function Ft(){!s||nt||it||fetch(s,{credentials:"same-origin"}).then(n=>n.text()).then(function(n){let i=n.split(/\r?\n/);for(let c=0;c<i.length;c++){let p=i[c].trim();if(p&&p.indexOf("-->")>=0){let u=p.split("-->").map(A=>A.trim());if(u.length<2)continue;let m=qt(u[0]),x=qt(u[1]),S=(i[c+1]||"").trim(),y="",L=0,v=0,b=0,H=0,K=S.indexOf("#xywh=");if(K>0){y=S.substring(0,K);let A=S.substring(K+6).split(",");A.length===4&&(L=parseInt(A[0],10),v=parseInt(A[1],10),b=parseInt(A[2],10),H=parseInt(A[3],10))}let D=re(y);z.push({start:m,end:x,spriteUrl:D,x:L,y:v,w:b,h:H}),x>rt&&(rt=x),c++}}nt=!0,f("embed sprites VTT loaded",{cues:z.length,durationApprox:rt})}).catch(function(n){it=!0,f("embed sprites VTT load failed",n)})}function se(n){if(!s||!z.length||!I)return;let i=I.getBoundingClientRect(),c=Math.max(0,Math.min(n-i.left,i.width)),p=i.width>0?c/i.width:0,u=(j||rt||0)*p,m=null;for(let L=0;L<z.length;L++){let v=z[L];if(u>=v.start&&u<v.end){m=v;break}}let x=ae();if(!x)return;if(!m||!m.spriteUrl||m.w<=0||m.h<=0){x.style.display="none";return}for(;x.firstChild;)x.removeChild(x.firstChild);let S=document.createElement("img");S.src=m.spriteUrl,Object.assign(S.style,{position:"absolute",left:-m.x+"px",top:-m.y+"px"}),x.appendChild(S),x.style.display="block";let y=Math.max(0,Math.min(i.width-m.w,c-m.w/2));x.style.left=y+"px",x.style.width=m.w+"px",x.style.height=m.h+"px"}function P(){e.classList.remove("autohide"),ht&&clearTimeout(ht),ht=setTimeout(function(){e.classList.add("autohide")},1800)}function oe(){try{let n=window.innerHeight||document.documentElement.clientHeight||e.clientHeight||0;if(n<=0)return;r.style.height=n+"px",t.style.height="100%",t.style.width="100%",t.style.objectFit="contain"}catch(n){}}function Vt(){try{j=isFinite(t.duration)?t.duration:0}catch(n){j=0}V&&(V.textContent=st(j)),E&&(E.textContent=st(t.currentTime||0))}function xt(){let n=j||0,i=t.currentTime||0,c=n>0?Math.max(0,Math.min(i/n,1)):0;$&&($.style.width=(c*100).toFixed(3)+"%"),tt&&(tt.style.left=(c*100).toFixed(3)+"%");let p=0;if(t.buffered&&t.buffered.length>0)try{p=t.buffered.end(t.buffered.length-1)}catch(m){p=0}let u=n>0?Math.max(0,Math.min(p/n,1)):0;J&&(J.style.width=(u*100).toFixed(3)+"%")}function G(){let n=t.muted?0:t.volume,i=t.muted||n===0?"Mute":"Vol",c=e.querySelector(".yrp-vol-btn");c&&(c.textContent=i,c.classList.toggle("icon-mute",i==="Mute"),c.classList.toggle("icon-vol",i!=="Mute"))}function St(){t.muted=!t.muted,G()}function wt(){t.paused?t.play().catch(function(){}):t.pause()}function Dt(n){let i=I.getBoundingClientRect(),c=Math.max(0,Math.min(n-i.left,i.width)),p=i.width>0?c/i.width:0,u=(j||0)*p;t.currentTime=u}function ce(n){let i=M;if(!i)return;let c=I.getBoundingClientRect(),p=Math.max(0,Math.min(n-c.left,c.width)),u=c.width>0?p/c.width:0,m=(j||0)*u;i.textContent=st(m),i.style.left=(u*100).toFixed(3)+"%",i.hidden=!1}function It(){Jt(l,t,W,ft,U,Gt),h.setView("langs"),h.constrainToPlayerHeight(2/3)}function Rt(){Qt(l,t,ft,U),h.setView("speed"),h.constrainToPlayerHeight(2/3)}function Ot(){Wt(l,B,ft,U),h.setView("subs"),h.constrainToPlayerHeight(2/3)}function Lt(){h.openMainView({injectSpeed:function(){l.querySelector('.yrp-menu-item[data-action="open-speed"]')||mt(l,"Speed","open-speed",{hasSubmenu:!0})},injectLanguages:function(){l.querySelector('.yrp-menu-item[data-action="open-langs"]')||mt(l,"Languages","open-langs",{hasSubmenu:!0})},injectSubtitles:function(){let n=Z(t);if(!l.querySelector('.yrp-menu-item[data-action="open-subs"]')){let i=mt(l,"Subtitles","open-subs",{hasSubmenu:!0,disabled:!n});i&&!n&&(i.title="No subtitles tracks")}}})}let Bt="",Q=0;function le(){l&&(Bt||(Bt=l.innerHTML||""))}function ue(){if(l&&!(Q>0))try{let n=l.getBoundingClientRect();Q=Math.ceil(n.height||0),Q>0&&(l.style.minHeight=Q+"px")}catch(n){}}function pe(){l&&(Q=0,l.style.minHeight="")}function Et(){l&&(l.hidden=!0,C&&C.setAttribute("aria-expanded","false")),T&&(T.hidden=!0),e.classList.remove("vol-open"),h.setView("main"),h.resetHeightLock()}function kt(){if(!w)return;let n=!t.paused;w.classList.toggle("icon-play",!n),w.classList.toggle("icon-pause",n),w.setAttribute("aria-label",n?"Pause (Space, K)":"Play (Space, K)"),w.title=n?"Pause (Space, K)":"Play (Space, K)",w.textContent=""}(function(){let n=function(){try{let i=localStorage.getItem("yrp:volume");return i?JSON.parse(i):null}catch(i){return null}}();n&&typeof n.v=="number"&&(t.volume=Math.max(0,Math.min(n.v,1))),n&&typeof n.m=="boolean"&&(t.muted=!!n.m),g&&(g.value=String(t.volume||1)),G(),t.addEventListener("volumechange",function(){if(!(Zt&&t.muted&&!Y))try{localStorage.setItem("yrp:volume",JSON.stringify({v:Math.max(0,Math.min(t.volume||0,1)),m:!!t.muted}))}catch(i){}}),t.addEventListener("loadedmetadata",function i(){if(t.removeEventListener("loadedmetadata",i),Y)return;let c=function(){try{let p=localStorage.getItem("yrp:volume");return p?JSON.parse(p):null}catch(p){return null}}();c&&(typeof c.v=="number"&&(t.volume=Math.max(0,Math.min(c.v,1))),typeof c.m=="boolean"&&(t.muted=!!c.m),g&&(g.value=String(t.volume||1)),G())})})(),function(){try{let n=localStorage.getItem("yrp:speed");if(n){let i=parseFloat(n);isFinite(i)&&i>0&&(t.playbackRate=i)}}catch(n){}isFinite(gt)&&gt>0&&At(gt),t.addEventListener("ratechange",function(){try{localStorage.setItem("yrp:speed",String(t.playbackRate))}catch(n){}try{localStorage.setItem("playback_speed",String(t.playbackRate))}catch(n){}})}(),function(){let n=e.getAttribute("data-video-id")||"";if(!n)return;function i(){try{let y=localStorage.getItem("yrp:resume");return y?JSON.parse(y):{}}catch(y){return{}}}function c(y){try{localStorage.setItem("yrp:resume",JSON.stringify(y))}catch(L){}}let p=i(),u=p[n],m=Date.now();function x(y){let L=isFinite(t.duration)?t.duration:0;if(L&&y>10&&y<L-5)try{t.currentTime=y}catch(v){}}if(u&&typeof u.t=="number"&&m-(u.ts||0)<180*24*3600*1e3){let y=Math.max(0,u.t|0);isFinite(t.duration)&&t.duration>0?x(y):t.addEventListener("loadedmetadata",function L(){t.removeEventListener("loadedmetadata",L),x(y)})}let S=Kt(function(){let y=isFinite(t.duration)?t.duration:0,L=Math.max(0,Math.floor(t.currentTime||0)),v=i();v[n]={t:L,ts:Date.now(),d:y};let b=Object.keys(v);if(b.length>200){b.sort(function(H,K){return(v[H].ts||0)-(v[K].ts||0)});for(let H=0;H<b.length-200;H++)delete v[b[H]]}c(v)},3e3);t.addEventListener("timeupdate",function(){!t.paused&&!t.seeking&&S()}),t.addEventListener("ended",function(){let y=i();delete y[n],c(y)})}(),function(){let n=e.closest(".player-host")||e,i=ot(n,"data-options",null),c=!!(i&&Object.prototype.hasOwnProperty.call(i,"autoplay")&&i.autoplay);if(f("autoplay check (embed)",{WANT:c,opt:i}),!c)return;function p(x){f("tryPlaySequence",{reason:x,muted:t.muted,rs:t.readyState});let S=null;try{S=t.play()}catch(y){f("play() threw sync",y),S=null}S&&typeof S.then=="function"?S.then(function(){f("play() resolved")}).catch(function(y){if(f("play() rejected",{name:y&&y.name,msg:y&&y.message}),!t.muted){t.muted=!0,t.setAttribute("muted","");try{t.play().catch(function(L){f("retry rejected",L)})}catch(L){f("retry threw sync",L)}}}):setTimeout(function(){if(t.paused){t.muted=!0,t.setAttribute("muted","");try{t.play().catch(function(y){f("no-promise fallback rejected",y)})}catch(y){f("no-promise fallback threw",y)}}},0)}let u=!1;function m(x){u||(u=!0,p(x))}t.readyState>=1&&m("readyState>=1"),["loadedmetadata","loadeddata","canplay","canplaythrough"].forEach(function(x){let S=function(){t.removeEventListener(x,S),m(x)};t.addEventListener(x,S)}),setTimeout(function(){t.paused&&p("watchdog")},1200)}(),N&&N.addEventListener("click",function(){wt()}),w&&w.addEventListener("click",function(){wt()}),t.addEventListener("click",function(){wt()}),t.addEventListener("play",function(){e.classList.add("playing"),kt()}),t.addEventListener("pause",function(){e.classList.remove("playing"),kt()}),O&&O.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),Y=!0,St(),e.classList.add("vol-open"),P(),setTimeout(function(){e.classList.remove("vol-open")},800)}),a&&a.addEventListener("click",function(n){let i=n.target;i&&i.nodeType===3&&i.parentNode&&(i=i.parentNode),i&&i.classList&&i.classList.contains("yrp-vol-btn")&&(n.preventDefault(),n.stopPropagation(),Y=!0,St(),e.classList.add("vol-open"),P(),setTimeout(function(){e.classList.remove("vol-open")},800))},!0),g&&g.addEventListener("input",function(){Y=!0;let n=parseFloat(g.value||"1");isFinite(n)||(n=1),n=Math.max(0,Math.min(n,1)),t.volume=n,n>0&&(t.muted=!1),G(),e.classList.add("vol-open"),P()}),F&&F.addEventListener("wheel",function(n){n.preventDefault(),Y=!0;let i=.05,c=t.muted?0:t.volume,p=Math.max(0,Math.min(c+(n.deltaY<0?i:-i),1));t.volume=p,p>0&&(t.muted=!1),g&&(g.value=String(p)),G(),e.classList.add("vol-open"),P()},{passive:!1}),k&&I&&(k.addEventListener("mousedown",function(n){yt=!0,Dt(n.clientX),P()}),window.addEventListener("mousemove",function(n){yt&&Dt(n.clientX)}),window.addEventListener("mouseup",function(){yt=!1}),k.addEventListener("mousemove",function(n){ce(n.clientX),s&&nt&&!it?se(n.clientX):s&&!nt&&!it&&Ft()}),k.addEventListener("mouseleave",function(){M&&(M.hidden=!0),R&&(R.style.display="none")})),C&&l&&(le(),C.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),!l.hidden?(l.hidden=!0,C.setAttribute("aria-expanded","false"),h.setView("main"),pe()):(Et(),Lt(),l.hidden=!1,C.setAttribute("aria-expanded","true"),e.classList.add("vol-open"),P(),ue())}),l.addEventListener("click",function(n){let i=n.target&&n.target.closest?n.target.closest(".yrp-menu-item"):null;if(!i||!l.contains(i))return;let c=i.getAttribute("data-action")||"",p=i.getAttribute("data-lang")||"";if(h.getView()==="main"){if(c==="open-speed"){n.preventDefault(),n.stopPropagation(),Rt(),h.lockHeightFromCurrent(),e.classList.add("vol-open"),P();return}if(c==="open-langs"){n.preventDefault(),n.stopPropagation(),It(),h.lockHeightFromCurrent(),e.classList.add("vol-open"),P();return}if(c==="open-subs"){if(n.preventDefault(),n.stopPropagation(),!Z(t))return;Ot(),h.lockHeightFromCurrent(),e.classList.add("vol-open"),P();return}return}if(c==="back"){n.preventDefault(),n.stopPropagation(),Lt(),h.lockHeightFromCurrent(),e.classList.add("vol-open"),P();return}if(h.getView()==="speed"&&c==="set-speed"){let u=parseFloat(i.getAttribute("data-speed")||"NaN");if(!isNaN(u)){n.preventDefault(),n.stopPropagation(),At(t,u),l.hidden=!0,C.setAttribute("aria-expanded","false"),h.setView("main"),h.resetHeightLock();return}}if(h.getView()==="langs"&&c==="select-lang"&&p){n.preventDefault(),n.stopPropagation(),ie(p),l.hidden=!0,C.setAttribute("aria-expanded","false"),h.setView("main"),h.resetHeightLock();return}if(h.getView()==="subs"){if(c==="subs-on"){n.preventDefault(),n.stopPropagation(),Nt(!0),l.hidden=!0,C.setAttribute("aria-expanded","false"),h.setView("main"),h.resetHeightLock();return}if(c==="subs-off"){n.preventDefault(),n.stopPropagation(),Nt(!1),l.hidden=!0,C.setAttribute("aria-expanded","false"),h.setView("main"),h.resetHeightLock();return}}}),document.addEventListener("click",function(n){!l.hidden&&!l.contains(n.target)&&n.target!==C&&(l.hidden=!0,C.setAttribute("aria-expanded","false"),h.setView("main"),h.resetHeightLock())}),document.addEventListener("keydown",function(n){(n.code==="Escape"||(n.key||"").toLowerCase()==="escape")&&(l.hidden||(l.hidden=!0,C.setAttribute("aria-expanded","false"),h.setView("main"),h.resetHeightLock()))})),q&&q.addEventListener("click",function(){document.fullscreenElement?document.exitFullscreen().catch(function(){}):e.requestFullscreen&&e.requestFullscreen().catch(function(){})}),X&&X.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();try{if(document.pictureInPictureEnabled&&t.requestPictureInPicture&&!t.disablePictureInPicture)if(document.pictureInPictureElement===t)document.exitPictureInPicture().catch(function(){});else{let i=t.paused,c=t.muted,p=Promise.resolve();i&&(t.muted=!0,p=t.play().catch(function(){})),p.then(function(){return t.requestPictureInPicture()}).catch(function(){}).then(function(){i&&(t.pause(),t.muted=c)})}}catch(i){}}),e.addEventListener("contextmenu",function(n){if(n.preventDefault(),Et(),!T)return;let i=e.getBoundingClientRect();T.style.left=n.clientX-i.left+"px",T.style.top=n.clientY-i.top+"px",T.hidden=!1,e.classList.add("vol-open"),P()}),T&&(T.addEventListener("click",function(n){let i=n.target&&n.target.getAttribute("data-action"),c=Math.floor(t.currentTime||0),p=e.getAttribute("data-video-id")||"";if(i==="pip")X&&X.click();else if(i==="copy-url"){let u=new URL(window.location.href);u.searchParams.delete("t"),ct(u.toString())}else if(i==="copy-url-time"){let u=new URL(window.location.href);u.searchParams.set("t",String(c)),ct(u.toString())}else if(i==="copy-embed"){let m='<iframe width="560" height="315" src="'+((window.location.origin||"")+"/embed?v="+encodeURIComponent(p||""))+'" frameborder="0" allow="autoplay; encrypted-media; clipboard-write" allowfullscreen></iframe>';ct(m)}T.hidden=!0}),document.addEventListener("click",function(n){!T.hidden&&!T.contains(n.target)&&(T.hidden=!0)}),document.addEventListener("keydown",function(i){(i.code==="Escape"||(i.key||"").toLowerCase()==="escape")&&(T.hidden||(T.hidden=!0))}));function de(n){let i=n.target,c=i&&i.tagName?i.tagName.toUpperCase():"";if(i&&(i.isContentEditable||c==="INPUT"||c==="TEXTAREA")||n.ctrlKey||n.metaKey||n.altKey)return;let p=n.code,u=(n.key||"").toLowerCase();if(p==="Space"||p==="Enter"||p==="NumpadEnter"||p==="MediaPlayPause"||p==="KeyK"||u==="k"){n.preventDefault(),t.paused?t.play().catch(function(){}):t.pause();return}if(p==="ArrowLeft"||p==="KeyJ"||u==="j"){n.preventDefault(),t.currentTime=Math.max(0,(t.currentTime||0)-5);return}if(p==="ArrowRight"||p==="KeyL"||u==="l"){n.preventDefault();let m=isFinite(t.duration)?t.duration:1e9;t.currentTime=Math.min((t.currentTime||0)+5,m);return}if(p==="KeyM"||u==="m"){n.preventDefault(),St();return}if(p==="KeyF"||u==="f"){n.preventDefault(),q&&q.click();return}if(p==="KeyI"||u==="i"){n.preventDefault(),X&&X.click();return}if(p==="Escape"||u==="escape"){Et();return}}document.addEventListener("keydown",de),["mouseenter","mousemove","pointermove","touchstart"].forEach(function(n){(a||e).addEventListener(n,function(){try{e.focus()}catch(i){}P()},{passive:!0})}),e.addEventListener("mouseleave",function(){setTimeout(function(){e.classList.add("autohide")},600)});function at(){oe()}window.addEventListener("resize",at),setTimeout(at,0),setTimeout(at,100);function fe(){try{let n=ne();if(!n)return;n.addEventListener("cuechange",_),n.addEventListener("load",_)}catch(n){}}t.addEventListener("loadedmetadata",function(){if(Ht){let n=Tt(t,Ht);n>=0&&(W=n)}if(bt(),_(),et(),fe(),Vt(),xt(),at(),Ft(),kt(),l&&!l.hidden){let n=h.getView();n==="main"?Lt():n==="langs"?It():n==="speed"?Rt():n==="subs"&&Ot()}}),t.addEventListener("timeupdate",function(){Vt(),xt(),_()}),t.addEventListener("progress",function(){xt()}),d&&d.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),Z(t)&&(B=!B,_(),et(),P())})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Pt):Pt();})();
